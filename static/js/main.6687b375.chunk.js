(this.webpackJsonptesthotel=this.webpackJsonptesthotel||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},66:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(24),s=a.n(r),i=(a(42),a(43),Object(c.createContext)({login:Function.prototype,logout:Function.prototype,isAuth:!1})),o=a(17);var l=a(7),u=a(8),d=(a(44),a(2));function j(e){var t=e.valid,a=e.touched,c=e.shouldValidate;return!t&&c&&a}var b=function(e){var t=e.type||"text",a=["Input"],c="".concat(t,"-").concat(Math.random());return j(e)&&a.push("invalid"),Object(d.jsxs)("div",{className:a.join(" "),children:[Object(d.jsx)("label",{htmlFor:c,children:e.label}),Object(d.jsx)("input",{type:t,id:c,value:e.value,onChange:e.onChange}),j(e)?Object(d.jsx)("span",{children:e.errorMessage||"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}):null]})},h={login:{value:"",type:"email",label:"\u041b\u043e\u0433\u0438\u043d",errorMessage:"",shouldValidate:!0,touched:!1,valid:!1,validation:{required:!0,email:!0}},password:{value:"",type:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",valid:!1,touched:!1,validation:{required:!0,minLength:8,onlyLatinic:!0}}},v={location:{value:"",type:"text",label:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f",errorMessage:"",valid:!1,touched:!1,validation:{required:!0}},date:{value:"",type:"date",label:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f",errorMessage:"",valid:!1,touched:!1,validation:{required:!0}},daysNumber:{value:1,type:"text",label:"\u041a\u043e\u043b\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043d\u0435\u0439",errorMessage:"",valid:!1,touched:!1,validation:{required:!0}}};function O(e,t){var a=!0,c="";if(e.required){var n=""!==t.trim();c=n?c:"\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e",a=a&&n}if(e.minLength){var r=t.length>=e.minLength;c=r?c:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 ".concat(e.minLength," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),a=a&&r}if(e.email){var s=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase());a=a&&s,c=s?c:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"}if(e.onlyLatinic){var i=!/[\u0430-\u044f\u0410-\u042f\u0401\u0451]/.test(t);a=a&&i,c=i?c:"\u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0438\u0440\u0438\u043b\u0438\u0446\u0443"}return{isValid:a,errorMessage:c}}function p(e){var t=Object(c.useState)(e),a=Object(o.a)(t,2),n=a[0],r=a[1],s=Object.keys(n).reduce((function(e,t){return e&&n[t].valid}),!0);return{controls:n,onInputChange:function(e,t){var a=Object(u.a)({},n),c=Object(u.a)({},a[e]);c.touched=!0,c.value=t.target.value;var s=O(c.validation,c.value);c.valid=s.isValid,c.errorMessage=s.errorMessage,a[e]=Object(u.a)({},c),r(a)},isFormValid:s}}a(46),a(47);var f=function(e){return Object(d.jsx)("button",{onClick:e.clickHandler,className:"Button",disabled:!e.isFormValid,children:e.content})},x=function(){var e=Object(u.a)({},h),t=Object(c.useContext)(i),a=p(e),n=a.controls,r=a.onInputChange,s=a.isFormValid,o=Object.keys(n).map((function(e,t){return Object(d.jsx)(b,{type:n[e].type,label:n[e].label,onChange:r.bind(null,e),touched:n[e].touched,shouldValidate:!!n[e].validation,errorMessage:n[e].errorMessage,valid:n[e].valid})}));return Object(d.jsx)("div",{className:"fullscreen",children:Object(d.jsx)("div",{className:"form",children:Object(d.jsxs)("form",{children:[Object(d.jsx)("h1",{children:"Simple Hotel Check"}),o,Object(d.jsx)(f,{content:"\u0412\u043e\u0439\u0442\u0438",isFormValid:s,clickHandler:function(e){e.preventDefault(),t.login(n.login.value)}})]})})})},m=(a(48),a(10)),g="START_FETCHING",y="STOP_FETCHING",N="FILL_HOTELS",_="FETCH_HOTELS_ASYNC",w="ADD_FAVOURITE",C="REMOVE_FAVOURITE";function F(e,t,a){return{type:_,payload:{town:e,dateIn:t,days:a}}}function k(e){return{type:N,payload:e}}function S(){var e=Object(m.c)((function(e){return e.hotelsState})),t=Object(u.a)({},v),a=p(t),c=a.controls,n=a.onInputChange,r=(a.isFormValid,Object(m.b)());t.date.value=e.date,t.daysNumber.value=e.days,t.location.value=e.town;var s=Object.keys(c).map((function(e,t){return Object(d.jsx)(b,{value:c[e].value,type:c[e].type,label:c[e].label,onChange:n.bind(null,e),touched:c[e].touched,shouldValidate:!!c[e].validation,errorMessage:c[e].errorMessage,valid:c[e].valid},t)}));return Object(d.jsx)("div",{className:"Search",children:Object(d.jsxs)("form",{children:[s,Object(d.jsx)(f,{content:"\u041f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c",isFormValid:!0,clickHandler:function(e){e.preventDefault(),r(F(c.location.value,c.date.value,+c.daysNumber.value))}})]})})}a(54);var I=a(27);a(55),a(56);function M(e){var t=["Order",e.orderClass].join(" ");return Object(d.jsxs)("span",{id:e.id,onClick:e.onClick,className:t,children:[e.text," "]})}a(57);var H=a(35),D=a.n(H),V=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e){var t,a,c=Object(m.c)((function(e){return e.hotelsState})),n=Object(m.b)();return Object(d.jsxs)("div",{className:"Card",children:[e.isImage?Object(d.jsx)("div",{className:"card__photo",children:Object(d.jsx)("img",{src:"house.png",alt:"hotel"})}):null,Object(d.jsxs)("div",{className:"card__content",children:[Object(d.jsxs)("div",{className:"card__top",children:[Object(d.jsx)("div",{className:"card__hotel",children:e.hotelName}),Object(d.jsx)("div",{className:"card__favor",children:Object(d.jsx)("img",{onClick:function(){var t;e.isFavourite?n(function(e){return{type:C,payload:e}}(e.hotelName)):n((t=e.hotelName,{type:w,payload:t}))},src:"heart.svg",alt:""})})]}),Object(d.jsx)("div",{className:"card__center",children:Object(d.jsx)("div",{className:"card__date",children:(t=c.date,a=c.days,null===t?"":(t=t.split("-"),1===a?"".concat(t[2]," ").concat(V[+t[1]-1],", ").concat(t[0]," - ").concat(a," \u0434\u0435\u043d\u044c"):a>1&&a<5?"".concat(t[2]," ").concat(V[+t[1]-1],", ").concat(t[0]," - ").concat(a," \u0434\u043d\u044f"):"".concat(t[2]," ").concat(V[+t[1]-1],", ").concat(t[0]," - ").concat(a," \u0434\u043d\u0435\u0439")))})}),Object(d.jsxs)("div",{className:"card__bottom",children:[Object(d.jsx)("div",{className:"card__raiting",children:Object(d.jsx)(D.a,{rating:e.stars,starRatedColor:"#CDBC1E",numberOfStars:5,starDimension:"17px"})}),Object(d.jsxs)("div",{className:"card__price",children:["Price:",Object(d.jsxs)("span",{children:[e.price," \u20bd"]})]})]})]})]})}a(62);function E(e){var t=e.hotels.map((function(t,a){return Object(d.jsx)(A,{isFavourite:t.isFavourite,isImage:e.isImage,hotelName:t.hotelName,price:t.price,stars:t.stars},a)}));return Object(d.jsx)("div",{className:"cards__wrapper",children:Object(d.jsx)("div",{className:"Cards",children:t})})}function L(){var e,t,a=Object(m.c)((function(e){return e.hotelsState.favouriteHotels})),n=Object(c.useState)({price:"",stars:""}),r=Object(o.a)(n,2),s=r[0],i=r[1],l=(t=a,"ask"===(e=s).price?t.sort((function(e,t){return e.price-t.price})):"desc"===e.price?t.sort((function(e,t){return t.price-e.price})):"ask"===e.stars?t.sort((function(e,t){return e.stars-t.stars})):"desc"===e.stars?t.sort((function(e,t){return t.stars-e.stars})):t),u=function(e){var t=e.target.id;i((function(e){return Object(I.a)({price:"",stars:""},t,""===e[t]||"desc"===e[t]?"ask":"desc")}))};return Object(d.jsxs)("div",{className:"Favorites",children:[Object(d.jsx)("div",{className:"favorites__header",children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(d.jsxs)("div",{className:"favorites__control",children:[Object(d.jsx)(M,{id:"stars",orderClass:s.stars,text:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",onClick:u}),Object(d.jsx)(M,{id:"price",orderClass:s.price,text:"\u0426\u0435\u043d\u0430",onClick:u})]}),Object(d.jsx)(E,{isImage:!1,hotels:l})]})}a(63);var T=a(75),J=a(76),q=(a(64),a(65),a(66),function(e){var t=e.slides.map((function(e,t){return Object(d.jsx)(T.a,{children:Object(d.jsx)("img",{src:e,alt:""})},t)}));return Object(d.jsx)(J.a,{className:"Slider",spaceBetween:20,loop:!0,slidesPerView:3,children:t})});var R=["\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u0439\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"];function P(){var e,t,a=Object(m.c)((function(e){return e.hotelsState})),c=a.favouriteHotels.length;return Object(d.jsxs)("div",{className:"Result",children:[Object(d.jsxs)("div",{className:"results__header",children:[Object(d.jsxs)("div",{className:"results__info",children:[Object(d.jsx)("span",{children:"\u041e\u0442\u0435\u043b\u0438"}),Object(d.jsx)("span",{children:a.town})]}),Object(d.jsx)("div",{className:"results__date",children:(t=a.date,null===t?"":(t=t.split("-"),"".concat(t[2]," ").concat(R[+t[1]-1]," ").concat(t[0])))})]}),Object(d.jsx)("div",{className:"swiper__wrap",children:Object(d.jsx)(q,{slides:a.slides})}),Object(d.jsx)("div",{className:"favorite__wrap",children:Object(d.jsxs)("p",{children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435: ",Object(d.jsxs)("span",{children:[c," "]}),(e=c,e>1&&e<5?"\u043e\u0442\u0435\u043b\u044f":1===e?"\u043e\u0442\u0435\u043b\u044c":"\u043e\u0442\u0435\u043b\u0435\u0439")]})}),Object(d.jsx)(E,{isImage:!0,hotels:a.hotels})]})}function B(){var e=Object(m.b)();return Object(c.useEffect)((function(){var t=new Date,a="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate());e(F("\u041c\u043e\u0441\u043a\u0432\u0430",a,1))}),[e]),Object(d.jsxs)("div",{className:"Hotels",children:[Object(d.jsx)(S,{}),Object(d.jsx)(L,{}),Object(d.jsx)(P,{})]})}a(71);function Y(){var e=Object(c.useContext)(i).logout;return Object(d.jsxs)("header",{className:"Header",children:[Object(d.jsx)("div",{className:"header__title",children:"Simple Hotel Check"}),Object(d.jsxs)("div",{className:"logout",onClick:e,children:[Object(d.jsx)("p",{children:"\u0412\u044b\u0439\u0442\u0438"}),Object(d.jsx)("img",{src:"logout.png",alt:""})]})]})}var z=function(){var e=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){JSON.parse(localStorage.getItem("userData"))&&n(!0)}),[]),{loginHandler:function(e){localStorage.setItem("userData",JSON.stringify(e)),n(!0)},logout:function(){localStorage.removeItem("userData"),n(!1)},isAuth:a}}(),t=e.loginHandler,a=e.logout,n=e.isAuth,r=function(e){return e?Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/hotels",component:B,exact:!0}),Object(d.jsx)(l.a,{to:"/hotels"})]}):Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/login",component:x,exact:!0}),Object(d.jsx)(l.a,{to:"/login"})]})}(n);return Object(d.jsx)(i.Provider,{value:{login:t,logout:a,isAuth:n},children:Object(d.jsxs)("div",{className:"App",children:[n?Object(d.jsx)(Y,{}):null,r]})})},G=a(29),U=a(19),Z=a(15),$={hotels:[],favouriteHotels:[],date:null,town:"",days:1,isFetching:!1,slides:["slide1.png","slide2.png","slide3.png","slide4.png"]};var K=Object(U.b)({hotelsState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(u.a)(Object(u.a)({},e),{},{isFetching:!0,town:t.payload.town,date:t.payload.date,days:t.payload.days});case y:return Object(u.a)(Object(u.a)({},e),{},{isFetching:!1});case N:return Object(u.a)(Object(u.a)({},e),{},{hotels:Object(Z.a)(t.payload)});case w:var a=e.hotels.findIndex((function(e){return e.hotelName===t.payload})),c=Object(Z.a)(e.hotels);c[a].isFavourite=!c[a].isFavourite;var n=c[a];return Object(u.a)(Object(u.a)({},e),{},{hotels:Object(Z.a)(c),favouriteHotels:[].concat(Object(Z.a)(e.favouriteHotels),[n])});case C:var r=e.hotels.findIndex((function(e){return e.hotelName===t.payload})),s=Object(Z.a)(e.hotels);-1!==r&&(s[r].isFavourite=!s[r].isFavourite);var i=Object(Z.a)(e.favouriteHotels);return i=i.filter((function(e){return e.hotelName!==t.payload})),Object(u.a)(Object(u.a)({},e),{},{hotels:Object(Z.a)(s),favouriteHotels:Object(Z.a)(i)});default:return e}}}),Q=a(37),W=a(14),X=a.n(W),ee=a(36),te=a(18),ae=X.a.mark(le),ce=X.a.mark(ue),ne=X.a.mark(de);function re(e){return se.apply(this,arguments)}function se(){return(se=Object(ee.a)(X.a.mark((function e(t){var a,c,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(o.a)(t,1),c=a[0],n=oe(c.dateIn,c.days),r="http://engine.hotellook.com/api/v2/cache.json?location=".concat(c.town,"&currency=rub&checkIn=").concat(c.dateIn,"&checkOut=").concat(n),e.abrupt("return",fetch(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return e.map((function(e){return{hotelName:e.hotelName,price:e.priceFrom,stars:e.stars,isFavourite:!1}}))}function oe(e,t){var a=e.split("-"),c=new Date(+a[0],+a[1]-1,+a[2]+ +t),n=c.getFullYear(),r=c.getMonth()+1>9?c.getMonth()+1:"0"+(c.getMonth()+1),s=c.getDate()>9?c.getDate():"0"+c.getDate();return"".concat(n,"-").concat(r,"-").concat(s)}function le(e){var t,a,c,n;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(te.c)((s=t.town,i=t.dateIn,o=t.days,{type:g,payload:{town:s,date:i,days:o}}));case 3:return r.next=5,Object(te.b)(re,[t]);case 5:return a=r.sent,r.next=8,Object(te.b)((function(){return new Promise((function(e){return e(a.json())}))}));case 8:return c=r.sent,n=ie(c),r.next=12,Object(te.c)(k(n));case 12:return r.next=14,Object(te.c)({type:y});case 14:case"end":return r.stop()}var s,i,o}),ae)}function ue(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.d)(_,le);case 2:case"end":return e.stop()}}),ce)}function de(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.a)([ue()]);case 2:case"end":return e.stop()}}),ne)}var je=Object(Q.a)(),be=Object(U.d)(K,Object(U.a)(je));je.run(de);var he=be,ve=Object(d.jsx)(G.a,{children:Object(d.jsx)(m.a,{store:he,children:Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(z,{})})})});s.a.render(ve,document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.6687b375.chunk.js.map